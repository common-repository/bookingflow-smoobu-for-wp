!function(o){"use strict";var a=o("#smoobu-calendar-layout"),e=o("#smoobu_api_check_connection"),t=o("#smoobu_api_key"),c=o(".smoobu-connection-message"),n=o(".smoobu-accordion"),s=o(".smoobu-color-picker"),r=o(".smoobu-calendar"),i=function(a="",e=""){var t={};r.css("opacity","0.7"),t.smoobu_custom_styling_border_shadow=o('input[name="smoobu_custom_styling_border_shadow"]').prop("checked"),o('input[type="text"][name^="smoobu_custom_styling_"]').each(function(o,c){var n=c.name;t[n]=n===a?e:c.value}),t.action="get_calendar_styling",t.security=smoobu_calendar_ajax.styling_nonce,o.post(smoobu_calendar_ajax.ajaxurl,t,function(a){var e=JSON.parse(a);"OK"===e.status&&o("#smoobu-calendar-css-theme-"+smoobu_calendar_ajax.theme+"-inline-css").html(e.css),r.css("opacity","1")})},u=function(){n.accordion({header:"h2",heightStyle:"content"}),n.last().accordion("option","icons",!1),a.change(function(){var a=o(this).val();o(".smoobu-layout-code").each(function(){var e='[smoobu_calendar property_id="'+o(this).data("property-id")+'" layout="'+a+'"]';o(this).html(e)})}),e.click(function(){e.closest("td").css("opacity","0.7"),o.post(smoobu_calendar_ajax.ajaxurl,{action:"check_api_connection",api_key:t.val(),security:smoobu_calendar_ajax.connection_check_nonce},function(o){var a=JSON.parse(o);"OK"===a.status?(c.html(smoobu_calendar_ajax.connection_success),c.removeClass("red-text"),c.addClass("green-text")):(c.html(smoobu_calendar_ajax.connection_error+"<b>"+a.message+"</b>"),c.removeClass("green-text"),c.addClass("red-text")),e.closest("td").css("opacity","1")})}),s.wpColorPicker({change:function(o,a){var e=a.color.toString();i(o.target.name,e)}}),r.datepicker({numberOfMonths:1,minDate:0,maxDate:730}),o('input[name^="smoobu_custom_styling_"]').change(function(){i()})};o(document).ready(u)}(jQuery);